<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GÃ©o-Quiz | CatÃ©gories</title>

  <link rel="stylesheet" href="style.css" />
</head>

<body>

  <header class="top-bar">
    <div class="logo">GÃ©o-Quiz</div>
    <div class="player-info">
      ğŸ‘¤ <span id="usernameDisplay"></span>
      <span id="levelDisplay"></span>
    </div>
  </header>

  <main class="fade-in">

    <h2>Choisis une catÃ©gorie ğŸŒ</h2>

    <div class="category-grid">

      <div class="category-card" data-type="geographie">
        ğŸŒ
        <h3>GÃ©ographie</h3>
      </div>

      <div class="category-card" data-type="capitales">
        ğŸ›ï¸
        <h3>Capitales</h3>
      </div>

      <div class="category-card" data-type="drapeaux">
        ğŸš©
        <h3>Drapeaux</h3>
      </div>

      <div class="category-card" data-type="monuments">
        ğŸ—¼
        <h3>Monuments</h3>
      </div>

    </div>

    <div id="themesContainer" class="themes-container"></div>

  </main>

  <script>

    document.addEventListener("DOMContentLoaded", () => {

      /* =========================
         ğŸ” PROTECTION UTILISATEUR
      ========================= */
      const username = localStorage.getItem("username");

      if (!username) {
        window.location.replace("index.html");
        return;
      }

      /* =========================
         ğŸ‘¤ AFFICHAGE JOUEUR
      ========================= */
      const usernameDisplay = document.getElementById("usernameDisplay");
      if (usernameDisplay) {
        usernameDisplay.textContent = username;
      }

      /* =========================
         ğŸ”¥ MISE Ã€ JOUR XP & NIVEAU
      ========================= */
      if (typeof updateLevelUI === "function") {
        updateLevelUI();
      }

      /* =========================
         ğŸ® GESTION DES CARTES
      ========================= */
      const cards = document.querySelectorAll(".category-card");

      cards.forEach(card => {
        card.addEventListener("click", () => {
          const category = card.dataset.type;
          if (!category) return;
          selectCategory(category);
        });
      });

    });


    /* =========================
       ğŸ“‚ SÃ‰LECTION CATÃ‰GORIE
    ========================= */
    function selectCategory(category) {

      localStorage.setItem("selectedCategory", category);

      const themesContainer = document.getElementById("themesContainer");

      themesContainer.innerHTML = `
        <h3>Choisis un thÃ¨me</h3>
        <div class="theme-grid">
          <button class="main-btn" data-theme="facile">Facile</button>
          <button class="main-btn" data-theme="moyen">Moyen</button>
          <button class="main-btn" data-theme="difficile">Difficile</button>
        </div>
      `;

      document.querySelectorAll(".main-btn").forEach(button => {
        button.addEventListener("click", () => {
          const theme = button.dataset.theme;
          startQuiz(theme);
        });
      });

    }


    /* =========================
       ğŸš€ DÃ‰MARRER QUIZ
    ========================= */
    function startQuiz(theme) {
      localStorage.setItem("selectedTheme", theme);
      window.location.href = "quiz.html";
    }

  </script>

</body>
</html>
