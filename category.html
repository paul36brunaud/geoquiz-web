<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GÃ©o-Quiz | CatÃ©gories</title>

  <link rel="stylesheet" href="css/style.css" />
</head>

<body>

<header class="main-header">

  <h1 class="logo centered-title">
    ğŸŒ GÃ©o-Quiz & ğŸ“œ Histo-Quiz
  </h1>

  <div class="header-right">
    <div class="player-info">
      ğŸ‘¤ <span id="usernameDisplay"></span>
      â­ <span id="levelDisplay"></span>
    </div>
  </div>

</header>

<main class="fade-in centered">

  <h2 id="categoryTitle">Choisis une catÃ©gorie</h2>

  <div id="categoryGrid" class="category-grid"></div>

  <div id="themesContainer" class="themes-container"></div>

  <button class="main-btn back-btn" onclick="goBack()">
    â¬… Retour
  </button>

</main>

<script>

document.addEventListener("DOMContentLoaded", () => {

  const username = localStorage.getItem("username");
  const selectedMode = localStorage.getItem("selectedMode");

  /* ğŸ” Protection */
  if (!username || !selectedMode) {
    window.location.replace("index.html");
    return;
  }

  /* ğŸ‘¤ Affichage joueur */
  document.getElementById("usernameDisplay").textContent = username;

  if (typeof updateLevelUI === "function") {
    updateLevelUI();
  }

  loadCategories(selectedMode);

});


/* =========================
   ğŸ“‚ CHARGEMENT CATÃ‰GORIES
========================= */
function loadCategories(mode) {

  const grid = document.getElementById("categoryGrid");
  const title = document.getElementById("categoryTitle");

  let categories = [];

  if (mode === "geo") {

    title.textContent = "ğŸŒ CatÃ©gories GÃ©o-Quiz";

    categories = [
      { name: "Capitales du monde", type: "capitales" },
      { name: "Pays & Drapeaux", type: "drapeaux" },
      { name: "Continents", type: "continents" },
      { name: "Mers & OcÃ©ans", type: "mers" },
      { name: "Relief & Montagnes", type: "relief" }
    ];

  } else if (mode === "histo") {

    title.textContent = "ğŸ“œ CatÃ©gories Histo-Quiz";

    categories = [
      { name: "AntiquitÃ©", type: "antiquite" },
      { name: "Moyen Ã‚ge", type: "moyen_age" },
      { name: "RÃ©volution FranÃ§aise", type: "revolution" },
      { name: "Guerres Mondiales", type: "guerres" },
      { name: "Civilisations", type: "civilisations" }
    ];
  }

  grid.innerHTML = "";

  categories.forEach(cat => {
    const card = document.createElement("div");
    card.className = "category-card";
    card.innerHTML = `<h3>${cat.name}</h3>`;
    card.addEventListener("click", () => selectCategory(cat.type));
    grid.appendChild(card);
  });
}


/* =========================
   ğŸ® SÃ‰LECTION CATÃ‰GORIE
========================= */
function selectCategory(category) {

  localStorage.setItem("selectedCategory", category);

  const container = document.getElementById("themesContainer");

  container.innerHTML = `
    <h3>Choisis une difficultÃ©</h3>
    <div class="theme-grid">
      <button class="main-btn" onclick="startQuiz('facile')">Facile</button>
      <button class="main-btn" onclick="startQuiz('moyen')">Moyen</button>
      <button class="main-btn" onclick="startQuiz('difficile')">Difficile</button>
    </div>
  `;
}


/* =========================
   ğŸš€ DÃ‰MARRER QUIZ
========================= */
function startQuiz(theme) {
  localStorage.setItem("selectedTheme", theme);
  window.location.href = "quiz.html";
}


/* =========================
   â¬… RETOUR
========================= */
function goBack() {
  window.location.href = "menu.html";
}

</script>

</body>
</html>