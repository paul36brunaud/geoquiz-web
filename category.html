<script>
document.addEventListener("DOMContentLoaded", () => {

  /* üîê Protection utilisateur */
  const username = localStorage.getItem("username");

  if (!username) {
    window.location.href = "index.html";
    return;
  }

  /* üë§ Affichage joueur */
  const usernameDisplay = document.getElementById("usernameDisplay");
  if (usernameDisplay) {
    usernameDisplay.innerText = username;
  }

  /* üî• Mise √† jour XP & niveau */
  if (typeof updateLevelUI === "function") {
    updateLevelUI();
  }

  /* üéÆ Gestion clic cartes cat√©gories */
  document.querySelectorAll(".card").forEach(card => {

    card.addEventListener("click", () => {

      const type = card.dataset.type;
      if (!type) return;

      // Utilise le syst√®me navigation centralis√©
      if (typeof chooseCategory === "function") {
        chooseCategory(type);
      } else {
        localStorage.setItem("selectedCategory", type);
        localStorage.removeItem("selectedTheme");
        window.location.href = "themes.html";
      }

    });

  });

});
</script>
